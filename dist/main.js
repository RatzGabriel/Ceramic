(()=>{"use strict";const t=[{title:"pic1",src:"./images/1.jpg",price:"999",featured:!1,id:1},{title:"pic2",src:"./images/2.jpg",price:"999",featured:!0,id:2},{title:"pic3",src:"./images/3.jpg",price:"999",featured:!0,id:3},{title:"pic4",src:"./images/4.jpg",price:"999",featured:!0,id:4},{title:"pic4",src:"./images/4.jpg",price:"999",featured:!1,id:5},{title:"pic4",src:"./images/4.jpg",price:"999",featured:!1,id:6},{title:"pic4",src:"./images/4.jpg",price:"999",featured:!1,id:7},{title:"pic4",src:"./images/4.jpg",price:"999",featured:!1,id:8},{title:"pic4",src:"./images/4.jpg",price:"999",featured:!1,id:9},{title:"pic4",src:"./images/4.jpg",price:"999",featured:!1,id:10},{title:"pic4",src:"./images/4.jpg",price:"999",featured:!1,id:11},{title:"pic4",src:"./images/4.jpg",price:"999",featured:!1,id:12},{title:"pic4",src:"./images/4.jpg",price:"999",featured:!1,id:13},{title:"pic4",src:"./images/4.jpg",price:"999",featured:!1,id:14}];function e(t){const e=document.querySelector(t);if(e)return e;throw new Error(`Please check ${t} your selection`)}const c=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format((t/100).toFixed(2)),a=t=>{let e=localStorage.getItem(t);return e=e?JSON.parse(localStorage.getItem(t)):[],e},i=(t,e)=>{localStorage.setItem(t,JSON.stringify(e))},r=e(".cart-items"),n=function({id:t,title:i,price:n,src:o,amount:s}){const l=document.createElement("article");l.classList.add("cart-item"),l.setAttribute("data-id",t),l.innerHTML=`\n    <img src="${o}"\n              class="cart-item-img"\n              alt="${i}"\n            />  \n            <div>\n              <h4 class="cart-item-name">${i}</h4>\n              <p class="cart-item-price">${c(n)}</p>\n              <button class="cart-item-remove-btn" data-id="${t}">remove</button>\n            </div>\n          \n            <div>\n              <button class="cart-item-increase-btn" data-id="${t}">\n                <i data-id="${t}" class="fas fa-chevron-up"></i>\n              </button>\n              <p class="cart-item-amount" data-id="${t}">${s}</p>\n              <button class="cart-item-decrease-btn" data-id="${t}">\n                <i data-id="${t}" class="fas fa-chevron-down"></i>\n              </button>\n            </div>\n  `,r.appendChild(l),function(){const t=e(".cart-total");let i=a("cart").reduce(((t,e)=>t+e.price*e.amount),0);t.textContent=`Total : ${c(i)} `}()},o=e(".cart-overlay"),s=e(".cart-close");e(".cartButton").addEventListener("click",(()=>{console.log("test"),o.classList.add("show")})),s.addEventListener("click",(()=>{o.classList.remove("show")})),e(".cart-item-count");const l=e(".cart-items");function d(){const t=e(".cart-total");let i=a("cart").reduce(((t,e)=>t+e.price*e.amount),0);t.textContent=`Total : ${c(i)} `}e(".cart-total"),l.addEventListener("click",(function(t){const e=t.target.dataset.id;if(t.target.classList.contains("cart-item-remove-btn")){let t=document.querySelectorAll(".cart-item");t=[...t],t.forEach((t=>{if(t.dataset.id==e){let c=a("cart");for(let t=0;t<c.length;t++)c[t].id==e&&(c.splice(t,1),i("cart",c));t.remove()}}))}if(t.target.classList.contains("cart-item-increase-btn")||t.target.classList.contains("fa-chevron-up")){let t=document.querySelectorAll(".cart-item-amount");t=[...t],t.forEach((t=>{let c=a("cart");if(t.dataset.id==e){for(let a=0;a<c.length;a++)c[a].id==e&&(c[a].amount=c[a].amount+1,t.textContent=c[a].amount,console.log("cart+++",c));i("cart",c)}}))}if(t.target.classList.contains("cart-item-decrease-btn")||t.target.classList.contains("fa-chevron-down")){let t=document.querySelectorAll(".cart-item-amount");t=[...t],t.forEach((t=>{let c=a("cart");if(t.dataset.id==e){for(let a=0;a<c.length;a++)c[a].id==e&&(console.log("cartIII",c[a]),console.log("???",c[a].amount),console.log("cart+++",c),c[a].amount-1==0?(console.log("cart",c),console.log("i",a),c.splice(a,1),console.log("after",c),i("cart",c),t.parentElement.parentElement.remove()):(c[a].amount=c[a].amount-1,t.textContent=c[a].amount));i("cart",c)}}))}d()}));const u=function(t,e){t.innerHTML=e.map((t=>`<article class="product">\n        <div class="product-container">\n          \n      <a href="singleProduct.html?id=${t.id}" class="product-icon">\n      <img src="${t.src}" class="product-img img" alt="${t.title}" />    \n    </a>  \n          <div class="product-icons">           \n            <button id="tes" class="product-cart-btn product-icon" data-id="${t.id}">\n              Shop now\n            </button>\n          </div>\n        </div>\n        <footer>\n          <p class="product-name">${t.title}</p>\n          <h4 class="product-price">${c(t.price)}</h4>\n        </footer>\n      </article> `)).join(""),document.querySelectorAll("#tes").forEach((t=>{t.addEventListener("click",(function(){(t=>{let e=a("cart"),c=a("store"),r=e.find((e=>e.id==t));if(console.log("cart",e,"item",r),!r){let a=c.find((e=>e.id==t));console.log("first",a),a={...a,amount:1},e.push(a),console.log("pp",a,"newCart",e),n(a),i("cart",e)}d()})(t.dataset.id)}))}))};let p=a("store");a("cart"),a("store"),function(){p=t.map((t=>{const{id:e,featured:c,name:a,price:i,src:r,title:n}=t;return{id:e,featured:c,name:a,price:i,src:r,title:n}})),i("store",p);let c=a("cart");const r=a("store").filter((t=>!0===t.featured)),o=e(".featured-center");u(o,r),c.forEach((t=>{console.log("allproductsCart",c),console.log("ele",t),n(t)})),i("cart",c)}()})();